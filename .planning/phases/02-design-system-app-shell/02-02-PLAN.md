---
phase: 02-design-system-app-shell
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - BarDown-iOS/BarDown/ContentView.swift
  - BarDown-iOS/BarDown/Tabs/ScoreboardTab.swift
  - BarDown-iOS/BarDown/Tabs/TeamsTab.swift
  - BarDown-iOS/BarDown/Tabs/RankingsTab.swift
  - BarDown-iOS/BarDown/Tabs/SettingsTab.swift
  - scripts/audit-glass-usage.sh
autonomous: false
requirements:
  - DESG-01
  - DESG-02

must_haves:
  truths:
    - "App launches with a Liquid Glass tab bar showing four tabs (Scores, Teams, Rankings, Settings)"
    - "Tapping each tab switches to its placeholder content"
    - "Tab bar minimizes on scroll down in scrollable content"
    - "Content areas use opaque backgrounds, not glass effects"
    - "No .glassEffect() calls exist outside the GlassKit module"
  artifacts:
    - path: "BarDown-iOS/BarDown/ContentView.swift"
      provides: "TabView with Tab API and AppTab enum"
      contains: "TabView"
    - path: "BarDown-iOS/BarDown/Tabs/ScoreboardTab.swift"
      provides: "Placeholder scoreboard screen with NavigationStack and ScrollView"
      contains: "NavigationStack"
    - path: "BarDown-iOS/BarDown/Tabs/TeamsTab.swift"
      provides: "Placeholder teams screen"
      contains: "NavigationStack"
    - path: "BarDown-iOS/BarDown/Tabs/RankingsTab.swift"
      provides: "Placeholder rankings screen"
      contains: "NavigationStack"
    - path: "BarDown-iOS/BarDown/Tabs/SettingsTab.swift"
      provides: "Placeholder settings screen"
      contains: "NavigationStack"
    - path: "scripts/audit-glass-usage.sh"
      provides: "Shell script to detect .glassEffect() usage outside GlassKit"
  key_links:
    - from: "BarDown-iOS/BarDown/ContentView.swift"
      to: "BarDown-iOS/BarDown/Tabs/"
      via: "Tab struct referencing each tab view"
      pattern: "Tab\\("
    - from: "BarDown-iOS/BarDown/ContentView.swift"
      to: "TabView"
      via: "SwiftUI TabView with system Liquid Glass"
      pattern: "TabView\\(selection:"
---

<objective>
Wire up tab-based navigation with Liquid Glass chrome and create placeholder screens for all four tabs.

Purpose: Completes the app shell so it looks and behaves like a real app with working tab navigation. The system automatically applies Liquid Glass to the TabView. Placeholder screens establish the structure that Phase 3+ will fill with real content. The glass audit script enforces the DESG-02 boundary.
Output: Navigable 4-tab app with Liquid Glass tab bar, placeholder content screens, and glass usage audit.
</objective>

<execution_context>
@/Users/darrenbrelesky/.claude/get-shit-done/workflows/execute-plan.md
@/Users/darrenbrelesky/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-design-system-app-shell/02-RESEARCH.md
@.planning/phases/02-design-system-app-shell/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build tab navigation with system Liquid Glass and placeholder tab screens</name>
  <files>
    BarDown-iOS/BarDown/ContentView.swift
    BarDown-iOS/BarDown/Tabs/ScoreboardTab.swift
    BarDown-iOS/BarDown/Tabs/TeamsTab.swift
    BarDown-iOS/BarDown/Tabs/RankingsTab.swift
    BarDown-iOS/BarDown/Tabs/SettingsTab.swift
    scripts/audit-glass-usage.sh
  </files>
  <action>
    1. **Replace ContentView.swift** with tab-based navigation using the new `Tab` API (NOT deprecated `tabItem`):

       ```swift
       import SwiftUI

       enum AppTab: String, CaseIterable {
           case scoreboard, teams, rankings, settings

           var title: String {
               switch self {
               case .scoreboard: return "Scores"
               case .teams: return "Teams"
               case .rankings: return "Rankings"
               case .settings: return "Settings"
               }
           }

           var icon: String {
               switch self {
               case .scoreboard: return "sportscourt.fill"
               case .teams: return "heart.fill"
               case .rankings: return "chart.bar.fill"
               case .settings: return "gearshape.fill"
               }
           }
       }

       struct ContentView: View {
           @State private var selectedTab: AppTab = .scoreboard

           var body: some View {
               TabView(selection: $selectedTab) {
                   Tab(AppTab.scoreboard.title, systemImage: AppTab.scoreboard.icon, value: .scoreboard) {
                       ScoreboardTab()
                   }
                   Tab(AppTab.teams.title, systemImage: AppTab.teams.icon, value: .teams) {
                       TeamsTab()
                   }
                   Tab(AppTab.rankings.title, systemImage: AppTab.rankings.icon, value: .rankings) {
                       RankingsTab()
                   }
                   Tab(AppTab.settings.title, systemImage: AppTab.settings.icon, value: .settings) {
                       SettingsTab()
                   }
               }
               .tabBarMinimizeBehavior(.onScrollDown)
           }
       }
       ```

       The system automatically applies Liquid Glass to the TabView tab bar in iOS 26 — no manual `.glassEffect()` needed (DESG-01).

    2. **Create placeholder tab views** in `BarDown-iOS/BarDown/Tabs/` directory. Each tab:
       - Wraps content in `NavigationStack` (gets automatic glass toolbar treatment)
       - Has a `.navigationTitle()` with the tab name
       - Contains a `ScrollView` with placeholder content (so `.tabBarMinimizeBehavior` can be tested)
       - Uses **opaque backgrounds only** — no `.glassEffect()`, no glass imports (DESG-02)
       - Uses `.regularMaterial` or solid colors for placeholder cards, NOT glass

       **ScoreboardTab.swift:**
       ```swift
       import SwiftUI

       struct ScoreboardTab: View {
           var body: some View {
               NavigationStack {
                   ScrollView {
                       VStack(spacing: 12) {
                           ForEach(0..<8) { index in
                               RoundedRectangle(cornerRadius: 16)
                                   .fill(.regularMaterial)
                                   .frame(height: 100)
                                   .overlay {
                                       Text("Game \(index + 1)")
                                           .foregroundStyle(.secondary)
                                   }
                           }
                       }
                       .padding()
                   }
                   .navigationTitle("Scores")
               }
           }
       }
       ```

       **TeamsTab.swift:** Same pattern with "Team" placeholders, title "Teams"
       **RankingsTab.swift:** Same pattern with "Ranking" placeholders, title "Rankings"
       **SettingsTab.swift:** Use a `List` with placeholder settings rows (common pattern for settings), title "Settings"

    3. **Create glass audit script** at `scripts/audit-glass-usage.sh`:
       ```bash
       #!/bin/bash
       # Audit: ensure no .glassEffect() calls exist outside the GlassKit module
       # Covers DESG-02 and DESG-05 enforcement

       VIOLATIONS=$(grep -rn "\.glassEffect" BarDown-iOS/BarDown/ --include="*.swift" 2>/dev/null)

       if [ -n "$VIOLATIONS" ]; then
           echo "FAIL: .glassEffect() found outside GlassKit module:"
           echo "$VIOLATIONS"
           exit 1
       else
           echo "PASS: No .glassEffect() calls found outside GlassKit module"
           exit 0
       fi
       ```
       Make it executable: `chmod +x scripts/audit-glass-usage.sh`

    **CRITICAL:** None of the tab placeholder files should import GlassKit or use `.glassEffect()`. Content is opaque per DESG-02.
  </action>
  <verify>
    <automated>cd /Users/darrenbrelesky/Documents/claude-code/BarDown && xcodebuild build -project BarDown-iOS/BarDown.xcodeproj -scheme BarDown -destination 'platform=iOS Simulator,name=iPhone 16' 2>&1 | tail -10 && bash scripts/audit-glass-usage.sh</automated>
    <manual>Launch on iOS 26 simulator: verify 4 tabs appear, tab bar has Liquid Glass treatment, tapping tabs switches content, scrolling minimizes tab bar</manual>
    <sampling_rate>run after this task commits, before checkpoint</sampling_rate>
  </verify>
  <done>
    - ContentView.swift uses TabView with Tab API (not deprecated tabItem)
    - Four tab views exist with NavigationStack, ScrollView, and opaque placeholder content
    - Tab bar minimizes on scroll (.tabBarMinimizeBehavior(.onScrollDown))
    - Zero .glassEffect() calls outside GlassKit module (audit script passes)
    - Project builds clean for iOS 26 simulator
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify Liquid Glass app shell on simulator</name>
  <files>BarDown-iOS/BarDown.xcodeproj</files>
  <action>
    Human verification checkpoint. No automated work — this verifies the visual result of Task 1.

    What was built:
    - Complete iOS 26 app shell with Liquid Glass tab bar (system automatic)
    - 4 tabs: Scores, Teams, Rankings, Settings
    - Dark mode as default aesthetic
    - Opaque placeholder content in each tab
    - Tab bar minimize behavior on scroll
    - GlassKit design system module ready for future phases

    How to verify:
    1. Open BarDown-iOS/BarDown.xcodeproj in Xcode 26
    2. Select an iOS 26 iPhone simulator and run the app (Cmd+R)
    3. Verify the tab bar at the bottom has Liquid Glass treatment (translucent, glowing edges)
    4. Tap each tab (Scores, Teams, Rankings, Settings) and confirm each switches to its screen
    5. On the Scores tab, scroll down and verify the tab bar minimizes
    6. Scroll back up and verify the tab bar reappears
    7. Verify the app is in dark mode (dark backgrounds, light text)
    8. Verify placeholder content cards are opaque (not glassy/blurry)
    9. (Optional) Switch iOS simulator to light mode in Settings and verify the app still looks coherent
    10. (Optional) Run on iPad simulator to verify it works as universal app

    Resume signal: Type "approved" to continue, or describe any visual issues to fix.
  </action>
  <verify>Visual inspection on iOS 26 simulator confirms Liquid Glass tab bar, dark mode default, opaque content, and tab bar minimize behavior</verify>
  <done>User has visually confirmed the app shell looks correct on iOS 26 simulator with Liquid Glass navigation chrome and opaque content areas</done>
</task>

</tasks>

<verification>
- `xcodebuild build` succeeds for both iPhone and iPad simulator destinations
- `bash scripts/audit-glass-usage.sh` returns PASS (no glass outside GlassKit)
- Visual verification: Liquid Glass tab bar renders correctly on iOS 26 simulator
- All four tabs navigate correctly
- Dark mode is active by default
</verification>

<success_criteria>
- App displays Liquid Glass tab bar with 4 functional tabs
- Tab bar minimizes on scroll in content areas
- All content uses opaque backgrounds, no glass on content
- Glass audit script confirms no .glassEffect() leaks outside GlassKit
- App runs on both iPhone and iPad simulators
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system-app-shell/02-02-SUMMARY.md`
</output>
