---
phase: 02-design-system-app-shell
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - BarDown-iOS/BarDown.xcodeproj/project.pbxproj
  - BarDown-iOS/BarDown/BarDownApp.swift
  - BarDown-iOS/BarDown/Assets.xcassets/Contents.json
  - BarDown-iOS/BarDown/Assets.xcassets/AccentColor.colorset/Contents.json
  - BarDown-iOS/BarDown/Assets.xcassets/AppIcon.appiconset/Contents.json
  - BarDown-iOS/Packages/GlassKit/Package.swift
  - BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassKit.swift
  - BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassModifiers.swift
  - BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassComponents.swift
autonomous: true
requirements:
  - DESG-03
  - DESG-04
  - DESG-05

must_haves:
  truths:
    - "Xcode project builds successfully for iOS 26 simulator (iPhone and iPad)"
    - "GlassKit module compiles as a local Swift package and can be imported"
    - "App launches with dark mode as default color scheme"
  artifacts:
    - path: "BarDown-iOS/BarDown.xcodeproj/project.pbxproj"
      provides: "Xcode project targeting iOS 26 with universal iPhone+iPad device family"
    - path: "BarDown-iOS/BarDown/BarDownApp.swift"
      provides: "App entry point with .preferredColorScheme(.dark)"
      contains: "preferredColorScheme(.dark)"
    - path: "BarDown-iOS/Packages/GlassKit/Package.swift"
      provides: "GlassKit local Swift package manifest targeting iOS 26"
      contains: ".iOS(.v26)"
    - path: "BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassModifiers.swift"
      provides: "Semantic glass view modifiers wrapping .glassEffect()"
      contains: "glassNavigation"
  key_links:
    - from: "BarDown-iOS/BarDown.xcodeproj"
      to: "BarDown-iOS/Packages/GlassKit"
      via: "Local package dependency in Xcode project"
      pattern: "GlassKit"
    - from: "BarDown-iOS/BarDown/BarDownApp.swift"
      to: "preferredColorScheme"
      via: "SwiftUI modifier on root view"
      pattern: "preferredColorScheme\\(.dark\\)"
---

<objective>
Create the Xcode project and GlassKit design system module as the foundation for the BarDown iOS app.

Purpose: Establishes the iOS project structure, universal iPhone/iPad target, dark mode default, and the GlassKit module that centralizes all Liquid Glass decisions. Everything in Phase 2 and beyond depends on this foundation.
Output: Buildable Xcode project with GlassKit local package, app entry point, and asset catalog.
</objective>

<execution_context>
@/Users/darrenbrelesky/.claude/get-shit-done/workflows/execute-plan.md
@/Users/darrenbrelesky/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-design-system-app-shell/02-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Xcode project with universal target and GlassKit local package</name>
  <files>
    BarDown-iOS/BarDown.xcodeproj/project.pbxproj
    BarDown-iOS/BarDown/BarDownApp.swift
    BarDown-iOS/BarDown/Assets.xcassets/Contents.json
    BarDown-iOS/BarDown/Assets.xcassets/AccentColor.colorset/Contents.json
    BarDown-iOS/BarDown/Assets.xcassets/AppIcon.appiconset/Contents.json
    BarDown-iOS/BarDown/Preview Content/Preview Assets.xcassets/Contents.json
    BarDown-iOS/Packages/GlassKit/Package.swift
    BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassKit.swift
    BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassModifiers.swift
    BarDown-iOS/Packages/GlassKit/Sources/GlassKit/GlassComponents.swift
  </files>
  <action>
    Create the Xcode project using the `xcodebuild` CLI or by generating the project structure manually. The project must:

    1. **Create the Xcode project** at `BarDown-iOS/BarDown.xcodeproj`:
       - Use `xcodegen` or manually create the project structure. If xcodegen is not available, use a minimal project generation approach: create the directory structure and use `swift package init` for GlassKit, then create the Xcode project via `xcodebuild` or write the pbxproj directly.
       - **Simplest approach:** Create the `BarDown-iOS/` directory, then use Xcode CLI: `cd BarDown-iOS && xcodebuild -create-project BarDown` — if that's not available, create the project files manually.
       - **Most reliable approach:** Create the directory structure and all Swift source files first, then generate the Xcode project using a project.yml with xcodegen (`brew install xcodegen` if needed), OR write a minimal project.pbxproj by hand.
       - Target: iOS 26.0 minimum deployment
       - Device family: iPhone + iPad (universal)
       - Product name: BarDown
       - Bundle identifier: com.bardown.app (or similar)
       - Swift language version: 6
       - SwiftUI App lifecycle (no UIKit AppDelegate)

    2. **Create BarDownApp.swift** — the @main entry point:
       ```swift
       import SwiftUI

       @main
       struct BarDownApp: App {
           var body: some Scene {
               WindowGroup {
                   ContentView()
                       .preferredColorScheme(.dark) // DESG-03: Dark is hero aesthetic
               }
           }
       }
       ```
       Also create a placeholder `ContentView.swift` with a simple Text("BarDown") so the project builds.

    3. **Create GlassKit local Swift package** at `BarDown-iOS/Packages/GlassKit/`:
       - Run `mkdir -p BarDown-iOS/Packages/GlassKit && cd BarDown-iOS/Packages/GlassKit && swift package init --name GlassKit --type library`
       - Update Package.swift to target iOS 26:
         ```swift
         // swift-tools-version:6.0
         import PackageDescription

         let package = Package(
             name: "GlassKit",
             platforms: [.iOS(.v26)],
             products: [
                 .library(name: "GlassKit", targets: ["GlassKit"]),
             ],
             targets: [
                 .target(name: "GlassKit"),
                 .testTarget(name: "GlassKitTests", dependencies: ["GlassKit"]),
             ]
         )
         ```

       - **GlassKit.swift** — namespace and re-exports:
         ```swift
         // GlassKit — centralized Liquid Glass design system for BarDown
         // All .glassEffect() calls in the app MUST go through this module.
         // Feature code imports GlassKit and uses semantic modifiers, never raw glass APIs.
         ```

       - **GlassModifiers.swift** — design tokens and view modifiers:
         ```swift
         import SwiftUI

         // MARK: - Design Tokens
         public enum GlassToken {
             /// Standard navigation chrome glass (used by custom nav elements)
             public static let navigation = Glass.regular
             /// Interactive floating controls (FABs, action buttons)
             public static let action = Glass.regular.interactive()
             /// Subtle overlay for media-heavy backgrounds
             public static let subtle = Glass.clear
             /// Semantic tinted glass for primary actions
             public static func tinted(_ color: Color) -> Glass {
                 Glass.regular.tint(color).interactive()
             }
         }

         // MARK: - View Modifiers
         public struct GlassNavigationModifier: ViewModifier {
             public func body(content: Content) -> some View {
                 content.glassEffect(GlassToken.navigation)
             }
         }

         public struct GlassFloatingActionModifier: ViewModifier {
             let tint: Color?
             public func body(content: Content) -> some View {
                 if let tint {
                     content.glassEffect(GlassToken.tinted(tint))
                 } else {
                     content.glassEffect(GlassToken.action)
                 }
             }
         }

         // MARK: - View Extensions
         public extension View {
             func glassNavigation() -> some View {
                 modifier(GlassNavigationModifier())
             }

             func glassFloatingAction(tint: Color? = nil) -> some View {
                 modifier(GlassFloatingActionModifier(tint: tint))
             }
         }
         ```

       - **GlassComponents.swift** — placeholder for reusable glass views (keep minimal per pitfall #6):
         ```swift
         import SwiftUI

         // MARK: - Reusable Glass Components
         // Add glass components here as feature screens need them.
         // Keep this minimal — the module boundary is what matters, not component count.
         ```

    4. **Add GlassKit as local package dependency** in the Xcode project. The project must reference `../Packages/GlassKit` as a local Swift package dependency.

    5. **Asset catalog**: Create a standard Assets.xcassets with AccentColor and AppIcon placeholder entries.

    **IMPORTANT:** The iOS project lives in `BarDown-iOS/` at the repo root, separate from the existing Vapor backend (which uses the root `Package.swift`). Do NOT modify the root Package.swift.
  </action>
  <verify>
    <automated>cd /Users/darrenbrelesky/Documents/claude-code/BarDown && xcodebuild build -project BarDown-iOS/BarDown.xcodeproj -scheme BarDown -destination 'platform=iOS Simulator,name=iPhone 16' 2>&1 | tail -10</automated>
    <manual>Verify project appears in Xcode with correct target settings (iOS 26, universal, SwiftUI lifecycle)</manual>
    <sampling_rate>run after this task commits, before next task begins</sampling_rate>
  </verify>
  <done>
    - Xcode project at BarDown-iOS/ builds for iOS 26 simulator (iPhone and iPad destinations)
    - GlassKit local package compiles and is importable from the main app target
    - BarDownApp.swift has @main entry point with .preferredColorScheme(.dark)
    - Asset catalog exists with AccentColor and AppIcon entries
    - Root Package.swift is untouched (backend unaffected)
  </done>
</task>

</tasks>

<verification>
- `xcodebuild build` succeeds for iPhone 16 simulator destination
- `xcodebuild build` succeeds for iPad destination (universal check)
- GlassKit package resolves and compiles as dependency
- No modifications to root-level Package.swift or Sources/App/
</verification>

<success_criteria>
- Project builds clean with zero errors on iOS 26 simulator
- GlassKit is a separate local Swift package with design tokens and semantic view modifiers
- Dark mode is set as default via .preferredColorScheme(.dark) on root view
- Project targets both iPhone and iPad (universal app)
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system-app-shell/02-01-SUMMARY.md`
</output>
